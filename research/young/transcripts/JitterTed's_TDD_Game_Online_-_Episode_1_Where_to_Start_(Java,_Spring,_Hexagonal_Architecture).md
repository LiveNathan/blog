# JitterTed's TDD Game： Online - Episode 1： ＂Where to Start？＂ (Java, Spring, Hexagonal Architecture)

**Video URL:** https://www.youtube.com/watch?v=Kpd2H9ftMjg

---

## Transcript

all right hello folks and welcome to I don't know if you want to call this episode n cuz uh what we're going to work on
today is um taking Jitter Ted's tdd game which you uh may or may not be familiar with uh if you're not familiar with it
then you can go ahead and go to uh td. cards and let's see where's the button there it is uh and tdd uh the jitterz tdd
game is a physical board game um that uh I've been shipping for a while hey Jonas welcome yeah new project uh and
obviously one of the issues is if your colleagues or people you want to play with are remote um it's a little hard to
play because it is a physical game um turns out uh when I was originally working on the game besides sort of the
physical prototypes that I was working with uh I did start an online version uh mainly intended so this was pre-pandemic
mainly intended to help me get people who were not physically near me to help me uh test out the game um then the
pandemic happened all sorts of stuff happened uh and did finally ship the game physically uh a couple years ago um but
because lots of people are still remote uh folks have told me hey we'd like to play this except our teams are remote the
people we'd like to play with are remote um so here we are uh I've been working on on other projects that were sort of
more important to my coaching business like Embler with a participant timer but now that that's pretty much done I'll
probably still do a little bit of work on that um it's time to to start start a new project uh but as I mentioned I
already have some code which I literally have not looked at in I I don't know how long C certainly years um originally
the the design of of the the code was spring boot on the back end um and so I will have to upgrade that because I'm sure
it was you know we'll take a look at it uh it's certainly not spring boot 3 I'm not even sure if it's spring Boot 2 um
we'll we'll see but on the front end I was using vue.js uh which I really liked um and uh as I've been recently using
HTM X um especially with with websockets for the participant timer uh I decided I don't think I need vue.js cuz one of
the issues with a front- end framework like that is it's kind of I was I was able to to to write tests for it um but all
the state is is for sure 100% on the server and in that case why sort of try to replicate it onto the front end um even
though VJs I think is of the sort of frontend Frameworks or libraries whatever you want to call them uh is I thought
sort of the the best suited for um at least the way my brain works it's still got a thousands of dependencies in an
ecosystem that I'm not really familiar with uh and I just don't want to deal with that um plus I'd like to to really
make it much more testable so I think um so again sort of based on my experience with HDMX uh and how basically easy
that that made things um we're that's what that's what we're going to do so I'm gonna pretty much rip out the front end
and start over with with the front end yeah Jonas apparently likes it too yeah I think it's it's a really um if you're
going to if you need a front end I think it's it it's one of the things I really liked about it is um it's sort of
progressive like you didn't actually have to adopt the whole you know ecosystem like you could actually just bring it in
as as JavaScript and and it would help you with things um now I still may use sort of uh what you might call a web web
components so there's um shoelace uh there's there's Alpine so there's all these things that are you know things that
will make the um the application kind of nicer um things that you want the front end that the browser to do uh but for
those I'll I'll probably use something something like shoelace uh so do I plan to use on timely for the front end um yes
uh the question is is how much of time Leaf will I be using for the front end so I basically threw together a mockup so
let's bring that up where is it where's the it there it is so this is the mockup I created um uh about two-thirds of
this was done in um I'm blanking on the name of the app um so there's several on online so one of the things I I was
thinking of before like trying to figure out how to write this from scratch is why not just use something like tabletop
simulator or one of three or four other sort of board board game online platforms as it were um this one uh I basically
put together I don't remember which one it was uh I'll have to go look um but it just wasn't flexible enough in terms of
layout like there's actually quite a like this one was mostly about card games and so you can see that that there's sort
of this this workspace here um and that's it and then you get then you have like you're you know and so it's very you
know this is this is kind of one of the things with a general platforms it's limited um tabletop simulator uh just
seemed like it was going to be a lot more work than than I wanted um plus to be quite honest uh this is not going to be
free um so if you want to buy my physical game it's 100 bucks or so uh and if you want to play the online version
there's going to be something right I haven't even thought deeply about the pricing likely if you buy the physical game
you'll get some amount of of you know free time on on on the online version for you know so there's all sorts of things
but eventually this this I'm going to charge for it uh it is my intellectual property um and so I will I will be
charging for it now the source code um uh is interesting because it is not open source in the sense that you are free to
do with it as you please um but it is Source available and I'm going to stick with that so that way you can look at the
source um you're just not allowed to take it and run it on your own um honestly if you do that and I don't find out
about it um but hopefully your your ethics will will uh will will drive you to do the right thing um all that's to say
is I look at I looked at you know various online services that allow you to take a board game put it online and I just
felt like they were either going to be a lot more work than and and a type of work that that I don't like doing um plus
again like because I want to charge for the service none of those are are going to work for me so I I basically took a
took the you know sort of put as much I could into one of the the services and found that it just wasn't flexible enough
for what I needed but it was good for for for creating a mockup um so this is the board right so this area here this is
the board um you can sort of see the pawns um that are in the in the spots um and uh there actually there there are two
decks so we'll see this as we as we go through the game there are two decks there's the action cards so there's the pile
where you draw from What's called the draw pile um there there's the discard pile for that uh and then there's another
deck that is the the draw pile for what are called test result cards and there's a a discard pile for that um and uh
each person as they play has basically what what I've been calling sort of a workspace uh and that's where you um you
draw your cards into you get five cards um a turn is based on playing or discarding three cards that's a turn uh and
then the scoring is basically commits how many times you you you sort of you know you go around the you start here you
go around uh and if you make it to back to here right you commit code then then you get a point and there basically ways
to mess that up by taking on Risk by not writing tests so again for for more details and a walk of this uh go ahead and
go to td. cards and there's a video that has that um and so uh each person has commits um there's risk you take on
there's two different types of risk uh the other thing is is there are variations in terms of the rules um so from a
structural standpoint there's kind of two ways I could I could I could do this one is here are the elements right a deck
that's shuffled another deck that's shuffled um a workspace that that can hold cards uh player pieces and things like
that and then in terms of enforcing the rules I can leave that up to the players the advantage of that is that's less
work for me uh the disadvantage is well you can then do whatever you want um but in fact another Advantage is there is
quite a few variations of the rules that I've uh basically collected as I've in as I've played this with people and
watched people play it um and so that flexibility I think is is a good thing eventually I might decide hey you know
here's the outof the-box rules that are enforced um but that's something that that that I'll that I'll add on later so
my primary goal is really to be able to play it remotely and let the players say hey your turn is up my turn you've
played three cards that's your turn you know uh oh we ran out of cards let's ask the assistant to shuffle the deck
things things like that good evening astd um so uh that's the minimum for that then of course there is the the actual
how do people join how do people find games so there's a whole um what in larger games is is referred to as sort of uh
matchmaking but there's no matchmaking really uh here because at least right now I haven't thought about anything like
you know oh you got experience points and you're an advanced player so maybe you only get playing against Advanced other
players all that stuff like that's that's later later on yeah Advanced matchmaking with ratings no maybe it'll happen um
but right now my concern is is more about um I've got three or four people who'd like to play Maybe six um and we want
to play online y all right congrats as we maybe we'll violate some hexagonal ladder yeah I just shipped out another copy
of of of the physical game so I'm I'm more happy to have a digital game because it's easier to it's easier to sell um I
actually do quite a bit of of prep work uh that I'll be hiring my son to do some of um because when you get um when you
get these tiles uh they are actually punched from you know basically a rectangular piece of chipboard um but you can
only get them punch punched from certain vendors or if you buy enough and I don't I don't sell enough to have enough
inventory so uh instead they use laser cutting laser cutting is great uh except it leaves soot behind right because it's
literally burning the Ed the edges and so you have to wipe off the soot if you ever gotten a game like that you know
that was sort of customade uh you know what I'm talking about if you don't you're lucky um but uh as a service to my
customers I basically clean them off for you and so yeah taxes are are are pretty uh yeah yep yeah you know you get you
get import taxes or vat or or all sorts of stuff luckily I don't I basically out uh Outsource that stuff um there still
probably are taxes for online things I don't know the rules anymore uh like I looked into a bunch of this stuff but it
to um 100% agree astd like if you have a choice between playing it in person versus playing it online you will have a
much better time and much more interesting discussions in person absolutely 100% agree I've experienced both I've I've
played this remote Ely because I could um and I've played this in person and yes in person is way more fun but also
interesting from a discussion standpoint uh but if you have a choice between nothing and the digital version well then
the digital version I think is is better yeah yeah it gets pretty close to to 200 with with shipping and so on yeah it's
uh hope maybe maybe you can get a company to to to pay for it uh I do get I do get a fair number of companies you know
they'll buy two or three copies and so then you sort of advertise the the shipping at least but you still got to pay all
the taxes but you know you
know $500 to them is is is nothing um yeah I will not be involved in any kind of of trying to work around taxes uh all right so um let's let's do a little bit of of of me where's my T draw there it is so I think games are are great um for fostering and and provoking interesting discussion um I mean honestly that's why I created the game is to Foster both learning of predictive tdd as well as discussing the tradeoffs for for for things of around the process um and it it sort of puts it though in in sort of a fun environment as opposed to sort of all right let's sit down and discuss this stuff um so there's well let's start there's the itself um so I'll put that in the center uh then there's whoops starting and joining games um then there's what I'll consider sort registration PA Etc um I think those are sort of the main you know if I were to put this in DDD here yeah persistence I mean persistence obviously will will be there um but i' sort of put that under sort of the the core core game mechanics I'm trying to think of like what are the major areas um from a functional functional standpoint that's that's more of an implementation detail um so sort of as part of player this so in here is uh groups so yeah so the groups and teams are more about I want to be able to find games part like we're in the same company or whatever and we want to we want to play um stuff all right so that's that's kind of enough of that um so core game end and so uh while I'll probably pretty likely be using Timely for um the main sort of the the main HTML page uh I've been toying with the idea of I want something a bit more component there's uh there's already a project by um Thomas uh and I'm not sure how to pronounce his last name is it is it shulie uh so he has this thing called Spring View here maybe if he's lurking he can tell me how he pronounces his name I actually should should go relisten to to one of his talks so I can figure out how to pronounce his name uh so he has this thing called Spring View component um at which I've been looking at and I'm all for like using stuff that already exists um but there's something about it that that just doesn't fit the um so uh so I'm probably not the other thing is is it it's a bit too integrated with spring um so there's aspects of it where I want to want to keep spring you know at sort of arms length uh that this doesn't doesn't quite fit for me but the idea uh is that I want like this concept level components for lack of a better term it is a component like a card would be a component and there are things you can do with it it knows how to present itself it has an image for the front and the back um they can be grouped into a deck uh they can be put into a workspace um but mostly it's about how does it get presented um so there's it's tied to a concrete card in the domain but this is more about how how is it presented and so the HTML for how it gets presented and how it you might zoom in on it so for example like this card up here um that's not going to be readable at that size it's great for when you're sort of in play and you know what's going on but if you want to look at the card and read its instructions um you're going to need to zoom in and so that I want to I want to have a a component for that uh for things like rolling the dice um I want you know basically a component for that so that's kind of how I'm thinking about it and one of the things that um I saw when I was doing something as simple as the excuse me as The Ensemble rotation thing yeah so um so view component works both with um uh time leaf and and jte um I I I want to like jte except I I don't understand why um why they made it so that it's no longer a natural HTML template that was for better you know I think why time Leaf is is so great is I can take a Time Leaf template and I can look at it in a browser um but because jte sticks in other stuff that's not HTML to me that's a big step backwards that's why jsp's got into trouble is because you started being able to write all sorts of code and you could never see how it looked until you ran through the server um I don't like that so jte uh so I'll probably be using time Leaf certainly for the for the for the main page and possibly for some of the some of the components if they start getting overly complex um but it's not that hard to to write this stuff and there this because I'm you know all about making stuff testable um I am going to be testability and so um the other thing is is because this is a you know this is a real-time game in the sense that people will do things and nobody's going to refresh their browser so therefore I am going to use uh websockets um therefore the HTML I'm sending around is not going through HTTP it's going over the websockets which means that a lot of the support that time leaf or other Frameworks like view component have don't really help me because they're not going through HTTP so I'm not getting get requests I'm getting just nothing um and so for all those Reasons I'm I'm going to be doing a lot of stuff on my P yo welcome um so that's sort of a a fundamental um piece of this um oops uh and I'm using HDMX over welcome um so shoelace for for lowlevel sort of custom for custom game um obviously we'll test drive this obviously or maybe not obviously we'll use the testable architecture else so Ely for over um so time Le for uh so stuff that's not the game right so all the stuff that's in you know starting and joining games account player management all that kind of stuff that'll just be regular time Leaf because that'll just be regular uh good old but uh it'll all it'll be custom um because the other thing is is there's lot so there are some some pieces where there sort of data inside of some kind of element like here right keeping track of the commits and the risk um those are those are probably Ed you know pretty much basic components um but everything else is is almost all images uh so the HTML will be pretty much here's a reference to an image um and and just render that uh uh but there will be will be buttons um and those those HTML um things like the cards and so on you want to be able to do things with them uh one thing I haven't figured out is the mechanics of how that's going to work so um drag and drop is is is probably the the most obvious thing um but I dread having to to do that uh and so I have to look a bit more about what the underlying components support cuz if I don't have to write that from scratch um I'd rather um I think that's uh yeah all right so let's go take a look let's go find the it as I said I haven't looked at it in a long time there it is let's see so I have not 23 uh let's let this updated oh some plugins yeah I don't care about those so you can see there's actually quite a bit here um I honestly don't remember where where I left off uh but there is is quite a bit here um and you can see I have got I've got the adapter and there's quite a bit there um and we've got the front end here as a separate module um I'm not even sure if I can if if this is like runnable so we'll find out stupendous follow no I I absolutely strong strongly dislike the new UI um three main reasons uh one is they did away with with the words with the text for for lots of things mainly for for the tools and they are really pushing hard against adding it and I don't understand their their thought process around this they they seem to be like actively fighting against putting it back I I don't understand it um the other thing is the contrast stinks so one of the things that you'll notice not in this project but in um in ensembl notice the background color of these tabs those are meaningful for me uh you can do what's called file coloring I have a video about how to do that um so purple is an outbound adapter uh peach is uh in the application layer blue is an inbound adapter and yellow is the are worse it's also I found it really hard to tell which is the currently selected tab um and so I and I filed issues for these and there's lots and lots of discussion and so um that's the long answer for I'm not switching until they fix that stuff uh yes Astra that's certainly I'm sure that's a part of it that um uh that they and I experienced this when I was was at Apple I tell the story all the time like um you know it's a bunch of of folks in in their mid 20s and they create the app and I'm looking at I'm like I can't read this I'm like what are you talking about I can't read this you've got dark gray and light gray which Apple apparently is really fond of which I think is is terrible uh and go was against their earlier human computer interface guidelines um and I said no you need to fix that cuz I can't read it um and I was and I was like joking like don't let me you know don't make me file a a an ADA you know complaint against you that you're not making this accessible I can't read this fix it um I don't remember if they actually fixed it uh but it was it was pretty terrible um more more likely is they are heavily influenced by vs code and I think vs code's interface is terrible um it's fine product for if you're using you know other languages and so on but I think the UI is terrible I think this idea of we're going to use icons that have arbitrary meaning um when we literally have space for words and so a mentions maybe they looking to lay off translation people no they actually added uh on a tri F basis text but instead of rotating the text like this is right rotating it based on where it is which is very easy to read we're very good at reading text even in rotated positions like a good understanding of how our visual system works and and and our cognitive architecture Works would tell you that what they did was they said no we're not going to rotate the text we're going to lay it out horizontally regardless of where it is which means that the space that this takes up instead of taking up just a little bit of space they made the this again like what are you doing I I don't understand it oh so Ada is the uh uh American Disabilities Act so there's a lot of laws in the US whether they're follow it or not and a lot of times they're not followed uh for making things accessible for the for the disabled so anyway um that's why I'm not all that's to say that's that's why I'm not using the new UI uh I think the the current UI is just fine I mean sure maybe they could tweak some things you know maybe have a little bit less space around some things I I don't know but um other than like maybe it looks dated demo um not sure what you meant by demo My Demo is behind the chat uh my arrow point at horizontal space yeah so oh sorry my bad now I understand yeah so what I was referring to is is instead of having the text like this they had the text like this sorry about that thank you for for mentioning that because I've got a little bit of extra space on the right that I always forget about um those are the main things like uh it's one of those like I I don't I I think the industry is po has lost a lot of his ability to do proper user experience design because I see so much terrible UI I studied human computer interactions and user interface and I and I just see so much terrible stuff and I know people in in that part of the industry and they're really frustrated um because it's it's all like see there's celebrate uh oh yes hydrate is my caffeinate cination is sort of the hydration stock market centered design I don't know what it is I think it's it's um I I just I'm so frustrated that you know we really it really feels like we've taken a step backwards in terms of of usability design uh anyway so yeah so let's see um loading um do the test run uh let's run all the tests in the back end what version of oh I want to see what version of of uh spring I'm using so I'm using version 17 of java um uh work I think this boot oh right this is that's right I'm like why can't I see the version of spring boot because I have to look at the parent palom yes I'm um because this is a multimodule project with a front end and a back end totally forgot about that thank you uh there is a higher level pal which is this one yes okay so 237 not too bad um we we can uh uh asra says Bank web UI is a little wiggly so a button run around on remember yes I mean when stuff moves after you click it or while you're like it's just terrible um so not too bad at least we're we're we at least at like a a not terribly old version of two uh it's certainly no longer supported and it's not even like 2.7 but 2.3 is not too bad um yeah uh so I'll probably run um the open rewrite which is now built into to intellig uh we can do an open rewrite recipe um I don't want a new one rewrite it I remember struggling with this before like how do I get it to run um was was the problem well I'll worry about that later uh right now why are the tests not running can we build all right we're able to build so everything compiles uh tests all right class uh oh I'm probably using a newer version of java than then it supports right because 2.3 um uh so let's check our our setup why well I think we're going to have to oh thank you astred I'll take a look at that um yeah I think 2.3 didn't support 15 15 may as well go back to 11 uh let's see back and let's go I don't think I can go back to 15 well I guess I can uh I think because I was using test text blocks so Java I'm sorry here I'm complaining unsupported class file uh 61 though I I probably shouldn't be spending this much time on on something that I'm basically going to get rid of so let's do that um that's 15 try it one more time if not I'm just going to upgrade uh we'll just do an open rewrite and upgrade everything yeah all right I don't know um if I go back to two I think it won't compile because I think I am using text box yeah oh no I'm using uh switch expression that's a bummer all right then whoops uh so let's go let's go upgrad let's let's stick in we'll leave 15 there um the question is is will will it upgrade and apply the stuff correctly what do I what do I have un um default deck Factory what's changed there looks like oh that's interesting two list what else has changed I think I was experimenting the last time I was um uh clearly with with some new stuff um oh I thought I changed that let's do go hey look at that all the tests pass I don't know what I did maybe I maybe something needed to be triggered to to anyway um I think I'm running on the right version that worked uh so that's so so what did I actually change in that I don't know why that that changed but um we'll just do a commit on that all right so let's go uh so stend fall the reason I had to change the version in multiple places is I wasn't sure that intellig was going to pick up the right version so the goal would be um this version is read by uh intellig and pulled in to the project settings so I would not normally have to to to change that once I get everything upgraded then then it'll all be good um but sometimes intell loses track yeah uh Jon says we have a Java desktop app that cannot run on a Jerry near than 11011 oh no oh no oh no it just doesn't want to start oh dear um so that's interesting so for uh apparently intj has a little bit of a a detector here that's saying um you'd like to run and my great open right migration wouldn't you in fact you can't even see it because it's off the screen a bit uh so what it says is run open right migration which is what we'd like to do recipes and so I filed an issue on this because last time I tried this I was like why would it off like it's a it's a pretty kind of dumb list um it's like here are all the migrations that you could possibly run um at least four of these don't make any sense in fact I'd argue more than four of these don't make any sense but certainly myig grade the spring boot 2.0 is not of something I want to do um yeah let's go back in time I don't even think that would work because what it's going to do is it's it's really migrate from pre-2.0 basically 1.5 whatever which I used to have some of uh to 2.0 um and what's weird is like there's a migrate to 2.3 migrate to 2.4 and then there's an upgrade to 2.5 because at some point they decide to use the word upgrade in the description and so it's sorted alphabetically as I said it's a dum list so let's go to 2.7 first all right uh uh I'm I'm sure uh DeShaun Carter's ears are are ringing um uh because we're about to do an upgrade he's all about upgrading um so the first thing we'll do is we'll migrate to 2.7 get everything to work uh and then and then see how it dear um well now that's a surprising failure and oh look it lumboc is involved so this was I this project was in my pre um I will just never use lumboc phase where I would use it occasionally uh so that's unfortunate how much am I actually using Lok yeah so it looks like I'm using in a few places actually quite a few places for all of the dto um once I upgrade to the more recent version of java we can get rid of those and move them on to records uh however lumify tool I don't think I have that those so let's go to this one so this is basically this could this as I say this could be a record this could have been a record um actually I don't know if it's part of this Plugin or if there's some other uh plugin that I have maybe it's part of the lumboc plugin to Del lumify but it's not yeah I'm I'm past Java 11 so I'm not sure what the problem is um it's basically saying I don't know why I was trying to compile it since it was already compiled the I wonder if it's it was using the this so I was using 17 15 I mean I would like to get rid of lumbo anyway um yeah maybe the cursor needs to be elsewhere yeah I don't know let's see oh yeah I guess so okay that's annoying thanks for that I actually thought my cursor was outside but it wasn't um we're going to dumbach and get um dare uh see this is where I'd love to like say can you just deify all my code there is an there Pro I mean I wonder is there an open rewrite recipe for daky I wouldn't be surprised if there was let's go look so let's go uh docs. openen rewrite.the Lok using Lok that's writing a refractor recipe that's a bummer what I'd like is is Just Deal on bifi but I guess um I'm blanking which version of forget that's what I was thinking is it's I think it was 16 that records came 16 yeah I can't use enable preview on a I don't think I can because I need to get spring boot to a 17 compatible version although I could convert welcome to migration problems right this is what happens if you don't um is that true is that is that lumbo I mean I don't think I have that uh but it's depend as follows is that a I am a little surprised that there's not um it's like no I I would never want to do yeah so it'll convert it to a record yeah oh well then let's go to Project lumbo thanks stend his follow I didn't anywhere um I need to grab it where would I grab it somewhere running lump dumbach and an an that's hilarious oh look there's a I think I've got already plugins yeah I mean if I at worst I can go to the maven repo and grab it uh but let's try this Maven plugin do I have plugins yes I do plugin and let's let it find it there it oh that's weird it expects the code to be I don't want I don't want that I just want you to change it in line all right then never mind let's go grab the lumbo jar file what does the lumbo do so path oh so it is going to put it also in directory uh yeah that's all right that's that's that I think is better um all right so nope see another case of like Maven uh sonop updated their search Maven jar yeah if I see Power Mock I'm I'm very sad um I don't usually grab the jar where jar hey there X proof is domain driven design still applicable for simple spring boot applications that read and write to a database uh those are two different things there's DDD and there's how you're going to implement it two completely different things have should not you should not be considering implementation details the question is is your domain complicated enough if you're just reading writing and it's crud and there's no Behavior you're not going to do DDD um in my experience though you're at some point you're going to want or wish you had done it uh so let's move from downloads uh uh the Lok jar to we uh so we'll need to change into the back I don't get it why do things not work why is it looking for stuff in the spring framework I don't understand uh Java why this is more it looks like it modified everything I don't know why it gave me stuff um uh so let's oh whoops I'm type stuff in there um so let's go let's go see so what I wish it had done is only the code that needed to be changed it directory so uh there's Source dumok main Java adapter oh I don't like what it did at all view oh because oh uh yeah no it basically changed no it oh um no all right we're going to do this manually generated it generated the method that it was generating on the Fly um which is pretty ugly uh but worse is it reformatted all my code and and added a bunch of suppressed warnings for I don't know why and it put final as parameters and I never do that so what I wish it had done is just like lightly remove stuff add stuff that it needs and don't mess with the other stuff but I understand what it probably is doing is it's doing a parsing at a low level and I don't know why you asked me to celebrate that asra this is terrible we celebrating how terrible it but uh no we don't want to know how lumbo does its job okay so we're going to do this manually um yeah uh so we're going to delete that goodbye all right so um let's let's go dumbach ify uh lum dumok Lum annotations see like I wish I did this because this is fine like here's my get here's my get I mean I don't usually use this but that's okay uh here's the equals a little wordy some stuff can be cleaned up but who cares um Can equals amusing uh hash code is is fine but this is okay um but boy I can't wait to turn this record um yeah all right uh so let's go this one that's fine I suspect it's going to views uh refractor change oh it must have just changed indentation one thing I noticed is this is this is probably one of the last projects where I was trying out using two space indents and I don't do that anymore I do I do four space uh some S I think about eight eight spaces uh all one one um let's turn on that log statement controller that uh refractor that action I really feel bad about like doing this and then I'm just going to records but one step at a time that's views uh dto hey look at that that's not a record uh that's not a and that and that one so as I suspected uh most of the stuff where I'm using lumbo are in the The View objects the data transfer view objects one well that's interesting what's that huh one yes this is fun I'm sure it's as fun for you to watch it is for me to do it um that one already is done uh let's take a look what what have note that I had this as a story uh but only from the domain code um what M changes I'll come back to that uh score um oops uh so what's the next unlock actually one let's see looks like that's the last of lumboc yes it is the last of blumbach um let's go here we can check that off um and let's go uh to the pal file and get rid of it all right now we can celebrate yay lombok is gone long Lo Lok um good riddens actually uh so let's tests why does this project have lumboc that's an excellent question X proof uh H what happened cannot find class playing that looks fine let's reload Maven let's do a rebuild money mainly honestly uh because we didn't have records this was pre Java 16 uh which again tells you how old this project again look at that all the tests passed amazing uh we definitely do not want to pass CH Lum all welcome do I play any D and D no I years my son just just never got into it he's into Magic the Gathering all right bigger I look like a DM I used to I used to be a DM but that was many years ago all right um so now we've gotten that out of the way let's go try running uh the rewrite recipe again you going to offer us the rewrite are uh so we said we're going to try to so the other thing that I don't like about uh the open rewrite running from within intellig is I'd like it to keep this stuff quiet like I don't need to see all all in this noise as a coach I'm I'm a certain kind of DM yes I guess you could say that hey look at that it's now uh validating active recipes and and now intellig reindex everything um but that looks like it worked yes Lum block dragons those are the worst uh all right so that seemed to work um did intell finish indexing everything looks that way let's try amazing they all pass um what version of spring did we get to we should have gotten to 27 I don't know what is the latest 27 27 oh it didn't do it oh that's weird did I run at the wrong level or level did it did it do anything hold on confused stuff well it removed my auto wires I could care less about that in fact I like my auto wires autowired well now um well what's weird is is like it ran end um but I guess wasn't smart enough pal it's likely though that I'm not there there isn't much between 23 and only I'm going to roll back those CU I like my at autowired annotations I know them uh but we'll keep the change it made in the Palm by removing because we no longer need to exclude the Vintage J unit um let's say we let's see if we can get to uh changes that's why I saw when I saw re-indexing I thought it had actually gotten the latest version so that's interesting um I mean to be honest we're going to not have a multimodule project to like is that a bug or is that just like oh we never thought that you'd run it on a multimodule project I don't know uh okay so now we're on all right everything's cool run our tests H 277 18 277 it's it's early enough we're getting we're going to be going to three anyway so it doesn't matter three since enough okay um that uh let's double check that intell picked up those versions yes 17 here uh the other ones it doesn't matter um I don't know why it doesn't change the project but it the module is the only one that matters so we're on 17 for we're at the not fun part of of migrating the code from 2. Spring Booth 2.3 and Java 15 to more recent versions you missed the fun with Dumbo ifying though uh all right so that's all good so let's do a commit um updated to Spring boot uh migrated should you already have that that you I three the other thing is I'd like to be able to run this um with some options uh because one of the things I don't want it to do is remove my autowired um so uh so we're going to go open rewrite uh Mig great spring so it'll already migrate to 17 we're fine with that um it'll upgrade dependencies it'll upgrade the parent pal uh remove unnecessary Constructor binding so it's going to run the 27 update which is a bummer happens I'm I'm I'm really sorry to hear that that you're actually the word new and Java 18 in the same sense sad uh Thomas for for me this the because it I find that um it's it's not noise that it's actually useful uh to remind me that this is the Constructor that spring will use um there are times when I have multiple Constructors and and then that becomes important uh so it's personal taste I recognize that some people might think it's not important um I don't necessarily disagree uh all right I'm not going to bother trying to figure right um but likely it did not change this it um first of all doesn't seem to to know about multimodule project so like the I have a base pal file and then I have two modules one for front end one for back end so the back end has all the starter stuff in it um the Basse pal for my entire project is where the spring boot version is but it doesn't seem to to to specify any options for for when running it um in addition it seems to be unreliable for it to to to pop up and so I don't I uh actually how to run it without it popping up because if I do that it's like new open rewrite recipe I don't want a new open rewrite recipe I want to run one of them so uh that's Auto so I'm I have to go now back to the docks because I don't know how to trigger it it was popping up before here uh but now it's sto popping up even though I'm not done yet I'd like I'd like to get the 3.2 so let's go to the let's see uh that's run an open rewrite recipe I don't have a rewrite recipe run built-in migration scripts oh it's only available for three well that's not useful the other thing I was really like had to laugh is like this one that is called upgrade and because it's alphabetical it's out of order um but this is just like they must have thrown this in at the last minute or something because this is not a great implementation um yeah usually I've run it uh with the mvn commands as well um I can just create one like this so recipe with intellig in your open rewrite yam file I configuration so let's go see so we've got a run configuration can we edit it um I guess we can so let's go change the recipe uh I I'm assuming the recipe is just 32 right yeah there's no 33 one yet because 33 is not out it yeah I wonder if the multim module all right so what did it change that's it I mean honestly there's no security uh so it's a bit unsurprising that it hasn't had to make many changes one bug one bug report per stream no way I've already got three uh all right so let's go here and now if we go to 3.2 s no six now I guess it's five I thought uh I thought there was 325 oh well there 33 rc1 uh I guess 325 okay um oh that's interesting I I didn't notice that before uh we could try that see what happens uh so let's cancel this let's undo this and let's see if it does the so it is resolving all the Palms um it did upgrade the parent version which it did interesting uh so it didn't it didn't pop up the the recipe runner up here uh in this pal file um it would only pop up here I don't know why uh but that seemed to work so thanks for the thanks for the idea jenas yes good spotting um honestly there aren't a lot of dependencies in here so it's unsurprising that not much has changed uh like there's no persistence there's no security there's hardly anything at all um so it's unsurprising that this went as smooth as tests and amazingly they all pass excellent that's probably the smoothest so if you're not going to if you're going to like avoid migrating your projects make sure they're trivial projects that helps a lot autowired autowired that we're going to keep and then autowired so I am going to revert revert these because I I wir what else changed yeah just a p okay um so we have now migrated to 3.2.5 and now we're on Java 17 um but we can let's go to what could possibly go on well I hope you have good tests that's all I can say because that's the only thing giving me confidence that that this stuff works that I compiled and the tests pass uh let's go check our project settings that's 22 um which it's going to be difficult to execute without having an SDK that's also 22 um I wonder if I run an open rewrite recipe for updating Java or was that part of the spring boot one I forget let's commit this 21 uh my favorite makito yes makito is this so let's one since I have so few dependencies there's nothing to to run uh recipes is not found what all right I'm just going to run this from the command line because I'm is or open rewrite Java my it every single code changes results in I hope I hope you're I hope by fixing them you mean you're getting rid of the makito um so what did it what did it collection I think that's the only changes it made is just for sequence collection using uh first and last let's like oh quite a few of nice yeah because I have a lot of these you know I'm getting the players uh and I want the first one um so there's certainly a lot of nice and a hand has cards I'm usually cool uh oh and look the it recognized that this could be replaced with get last that's very handy it's those little things this one's unfortunate because it it replaced get zero with get like like this is this is perhaps not great yes get seconds like um I'm not sure I like the lack of symmetry here so I'm those uh that one's fine that one's fine yeah I like get first if it's by itself but if it's part of I'm getting zero and I'm getting one then it's not fine I can see I've got a lot of tests that I'm going to have to be up updating better uh I agree first would have been better I remember seeing that there was a reason for it um I don't remember what the reason was but I remember there being a reason a uh a specific reason for it and it kind of made sense I all migrating so we can call it a day right uh let's of what is the difference between this one this one is all in package this one I don't um yeah I know I've got some ignored test I'm not too worried about those disabled actually uh so now the question is what happens supposedly uh actually did it start on 8088 um but that's the back end is on 888 where is the front end I think I actually have to to do something in the front here irrelevant uh package Jon I remember something around having to run something for proxying uh did I give myself a read me it T end did it cop I forget now who serves up the resources I think it might um so yeah I guess I could do npm run serve uh so because this is so old um it won't run on the current on the installed and I'm not sure I want to run um I mean I could do an does nope uh so the question is is how much do I try to get that to stuff to work would be kind of nice to see it running again but um yeah this is why like of all the reasons that I have to not use JavaScript typescript this is it right Java like I opened that project up right out of the box it worked running on the latest jvm something from java 15 worked this right three months heck like one month and everything changes and stuff is not as backwards compatible uh so let me see if I can install an older version uh just remove 350 see 350 packages from a from a VJs sounds like nothing but if you said I remove 350 you know dependencies from a Java project I'd be like what did you do delete the spring framework I mean the difference between weird uh so let's see if we can go back build oh uh let's change to the front build yes yes yes out of date uh care um should I go back earlier I wonder when that that came into being Hello Alex story homegrown Frameworks reimplement um H let's we're going to try uh version uh then I'll just comment out the console because it looks like it's only uh two build yeah NVM it's like tell me when you stop doing this I'm sure there's a way to do that compiled successfully so clearly it was between Ted oh my god it works just had to reset my NVM back a bunch of years so here we are uh with my online version of my game yes this is definitely a um I'm actually I'm actually kind of surprised uh like there's no way I'm I'm going to try to be able to be able to update the The View but I'm actually very happy that that that this is working um uh yes celebration's all around if if drink what's my next project after this one so one one of the problems with with this layout is um there's no room for the board uh and that's kind of a problem um so with my mockup and this goes back to answer Alex's question what what am I doing uh basically I'm implementing this game right now it's a physical version I want to create an online version uh but the board kind of has to be there because that's what you're playing against this was intended to be played played um alongside a board so you could do this and somebody just has the board and and they're they're playing with it so that's an option um not a great one though but you know if you've already got the physical game lay out the board have a camera on the board uh and then then this works so um we can play uh I'll take a less code card and I'll which doesn't clearly doesn't work that's a bummer I can reorder the discard that's a bummer well at least it laid it out nicely looks good doesn't have to work right uh uh let's go look at my other terminal hand so uh oh so this is what the draw uh the run test card um oh well uh oh I think because that's interesting it looks like it actually did discard it uh and we can draw our hand back up to full so now we got new cards um we can play this card and then I can play this card and then I can play this card and then I can draw my run tests so that passes uh and so now I draw my hand to those I might have been in the middle of a feature who the heck um Alex story asks uh why do I use no JS for back I'm not using nodejs for the back end I'm using nodejs for the front end the front end is currently view vuejs um back and I'm doing Java spring boot uh could look at the messages going back and forth I'm curious what those so the way this works is there is an API um but most of the communication is actually going through uh the websockets um but I'm actually using stomp on top of websockets um mainly because that made it uh really nice yes you you why not HDMX front end that's exactly where we're going uh mainly because honestly I don't want to try and update vue.js I I just don't want to do that um now the VJs frontend does do Post requests for command so that's why like this one failed uh cuz for whatever reason it thought I didn't have those cards would not surprise me that that there's some some bug somewhere because I might have been in the middle of changing something so um we Bas oh there's Endo so somewhere in front end router um there is the game that so this is the game master view which is someone can basically watch a game playing um it's clearly not working um but the idea is I'd be able to view you know who's got what what's being played what was the last test result card things like that um so I working that's kind of a bummer um oh maybe it didn't get the updated state so let's see can I play this and then draw a hand to full no yeah I'm not sure why this isn't work but anyway it would show the The View here uh sui says curious how hmx will hold up for a complex project like it's just fetching like I I don't understand the for only simple websites like what like I I want somebody to give me um a non-simple you're using react angular R viw and what you know what you're getting for for that you know unless you have a lot of complex State uh on the front end because the one thing that you do get sort of out of the box with some of these is there's lots of like components wanted um anyway so this so this is the opponent's view this is my view so I can see um my opponent's cards or at least the one they've played so the idea is this Central Area here is the workspace so I can see what's in the work space but I can't see my opponent's hand um so here this is my view of the game um I can see my opponent's workspace here they can see my workspace here they can't see my hand this is when I thought that um you wanted to be able to hide your hands and that may still still be something I want to do but for the most part seeing seeing the hands I don't I yeah so so this was all about like what um I am kind of bummed that the discard working and apparently the play isn't working um now that we've had that had that fun so we can kind of see how how the game was was working way back way back cuz yeah there's probably some code around the the cards who's Who's got what card um maybe there was something I was in the middle of changing um cuz here we get a discard request for card 12 from player one and it's basically hand which is just weird so each card has its own ID uh so so that's something that was that that is interesting is like each card is unique there are you know just like in the physical game it's not you know right if we look at if we look at the game um yeah there's a right code card and there's another right code card uh but they are two different cards so they get two different identifiers all right Jonas thanks for hanging out see you next and um we can go ahead and close all of this it was a really interesting design um because I had uh basically so there's probably some stuff that at least conceptually that's going to transfer over so for example I had um something that represented the row of the cards right so basically the um the layout and basically the cards and that would prettyy much represent uh this which I need to come up with a better name than the row I think it's just hand um and there's uh the cards mini view which showed the cards in sort of compressed format that was mainly for the the admin view that doesn't seem to work um and the test results was was sort of a modal popup because um uh you needed to see it and you couldn't interact with anything else until you sort of evaluated that there's also some interesting stuff and I know it's in my um videos when I was working on this way back when uh on um receiving events over the stomp Channel and so was this thing so one of the things that that I had to protect against um was missing a message so it's over websockets and you're getting messages but you could miss them uh and so the question is what would happen if you got a message and then or even worse was messages out of order so every message transmitted the entire state of the game and I'll probably continue to do something like like that but here the situ a was um if I got a message but it's monotonically increasing number was less than the last one I processed I basically just throw it away uh the cardid thing feels like trying to model the real world too closely um I don't think so I do need to know uh which card is which mainly because um yes cards of the same type are technically interchangeable but I have to keep track of how many there are and it was just easier to to give them unique identifiers battery um so let's take a look at at the back end um we've got so right off the bat you can sort of tell this is old older style thinking about hexagonal uh cuz I don't have an application layer I just have my domain layer with with a bunch of ports the only Port I have is is the game State Channel and this is the thing that sends uh that communicates information over uh the websocket so this is the broadcast adapter um which right now pretty much just has three this will probably completely honestly completely change um uh so we've got our Card Factory um which creates cards uh we've got our shuffler um and we've got different kinds of cards we have where where are we've got pling cards which I will probably change to action cards because that's what I call um that's what I call these guys now the ones that are uh like code bloat or less code um those are those are the action cards the test result cards are from uh are these test results that have stuff about that um so those will well I think what's different about Blackjack is I don't is that cards are sort of interchangeable um but I think actually they are value because yeah because they are value objects right because they are identified by the suit plus the rank whereas physical cards there there's no identifiers yes if there's green on the card so you can sort of see through them um uh because that's that's green and actually that's blue but um it's close enough to the to the green of my background that it that it you get see through yeah so that's that's basically the difference is that uh here one less card I can't differentiate them based on the on the card so I need to to give them identifiers to to keep track so is it a value object that's still a value object I still look at it as a value object the fact that it has an object I think I I I still I still struggle with with this particular case so we'll see what happens um so I've got my deck and what what is a deck so there's there's so the deck actually has two pieces um it has the draw pile um so basically their face down and that's where you draw new cards from and then there's the discard pile and eventually uh when the draw pile is empty we um we Shuffle we Shuffle the discard and that adds adds new cards so there's quite a bit of stuff it's already here um we'll see how well it holds up when when we start adding uh and modifying things um clearly this location thing was something I was working on I remember that yeah so there was some clearly there was some refactoring I was doing um that was not refactoring because I and also here I won't uh I will likely tracker um here I've got my random card shuffler which should not be in the domain uh so that'll change um this is the the enum that represents a definition of a itself so there's this thing about um on playay goes to versus on draw goes to so there's a variation of the game uh I might have to throw this out to simplify it but we'll see um so if you draw a card and happens to be a a a um those would actually be played against your opponent so they're they're a negative card that basically there's some restrictions if you get one of these you can't do certain things unless you do something else uh so they're kind of seen as as I call them Tech neglect or Tech Deck cards um and so uh that's one variation the the this one though you they don't some um the other cards like the the the predict card uh or the less code card um they go into your hand but those code bloat can't assert red cards they go immediately into your workspace or uh what is what I call in play um so that's why there there's this uh what happens to them when you draw them where do they go um and then what happens when you play them so when you play them um sometimes they go to different places so sometimes uh they go to self and sometimes by playing them you are discarding them and so which ones get discarded so for example the refactor you play it when you draw it it goes into your hand but when you play it it's immediately discarded because it does its operation discard uh so like the tech neglect cards when you draw it it goes immediately into play um and when you play it uh I don't know why it goes to self really should go to anyway there's like so I'm going to disagree that they're that they're value objects because I can the fact hand there's no way you can tell by anything that's on the card that they're different yet I am holding two of them therefore they cannot be value objects they can't the definition of a value object is it's defined by its attributes these two things have exactly the same attributes they both have the same text they both say predict on them they are both action cards they are not value objects they are immutable entities um because I can tell the difference I have to tell the difference between one and the other which is very different than two addresses that are the same place they are the same thing I can't say I live at 1 2 3 X Street and also have another address that's 1 2 3 X Street and say that those are different they are not by definition they are the same uh for a color red I can't have two instances of red they are by definition the same but predict cards they are if I have multiple versions of them they are cards uh if I drop one of them into a river and and give me one of them one that looks the same um but because I dropped one of them into object I know for for me it's like I I really want them to feel like value be when is what but how it affect the card and so the fact that I take an action on one of my cards doesn't mean I take an action on your card they are not the same card um money is a value object because $
3 is $3 um but what happens to that money object when it's in in an account right it gets mixed up with other stuff um
the actual instance of that money is actually a different one so there's some there's some subtleties here there's
there's an ownership um but the fact is is is they're different I'm more than happy to be proven wrong uh but I can't
see any way to reconcile the fact that I've got two of these things and for a value object I can't have two two of those
things that have the same attributes and say that they are two different things not not according to to the by and
regardless like I I need to tell the difference because I need to to to I you you can't I mean you can't say they're
value objects but they're not the same if they have the same attributes uh you can't do that like the rule of value
objects is that they are defined by their attributes now we could say they're value objects and one of the attributes is
which one is it um because that's fine uh because they aren't really entities because they don't change but um they do
have identifiers so we could say they are value objects but in addition to what it says on the card and what type it is
uh it has a number and then that resolves all our problems so we can call them value objects but the one of their
attributes is they have an identifier now it could be I don't need a unique identifier across all cards I could say
something like um actually let me turn on I turn on my other camera will that see there we go oh you're way out of focus
focus there we go so for example this right code card and this right code card they are clearly two different things so
we could say that that's right code one and that's right code to so we can tell the difference they value objects they
don't have they don't change over time but we do tell the difference one of their attributes is which which number it is
um and then I can tell the difference between these two less code cards by saying this is less code card one and this is
less code card two so I don't have to have a unique identifier across all of them that I will definitely Grant you um
but I do need to tell the difference between this less code card and that less code card and so part of its attributes
must be that there's also which one are you because now I've got another right code card um so I think I think I'm
willing to say that that they are value objects but that one of their attributes is a number of which one are they um
and then maybe that satisfies everybody so I think I think that that makes sense uh I'm I'm convinced they are value
objects but one of their attributes is which one of those are they and therefore I don't need a I don't need a Unique
Card ID for each individual card but I think it turns out to be easier that way um because otherwise the identifier then
becomes a composite of the type of card it is is this is this right code card one right code card two or right code card
three or is it less code card one less code card 2 uh that's kind of annoying if I just say this is one this is two this
is three and this is four and this is five that makes it a lot easier uh and that's basically what what I've done so I
don't have to have new numbers for every single card I just think it's easier than a than a composite key that's the
name of the card plus which one is it but I'm I'm happy to be uh I can't just count them because I need to know is this
predict card which one is it because I need to reference it I need card and I need to differentiate between uh then then
it makes it really difficult to refer to a specific one right so if I've got um if I've got these two in in my hand and
I want to play one of them yes it doesn't matter which one I play and I could just play any of but then it it's it's
just harder right because it's like I want to discard this right code card um and I could just say okay well that just
means discard any right code card yeah but it's easier if I just say identifier um yeah it might be that that I don't
absolutely 100% need the the identifiers that when I create the cards I just create four copies um but then I can't I
mean I still have to figure out if they're in a set two predict cards can't be equal so I have to differentiate them
some way and if I say that well it's just which instance they are isn't that still an ID uh I don't have to put them in
a set I could put them in a in in in a list I still think the same thing applies like I'm still differentiating them by
well now I'm list I mean I see what you're saying that I haven't thought all of all of the um and that doesn't if I play
a predict card it doesn't matter which one I them I just think it's harder um because now I'm I'm having to sort of scan
through the list for remove a a predict card um I don't know maybe that'll make things easier in in some cases but I'd
have to either say which position in the list fine yeah maybe I'm I'm coming around to the idea that that uh the idea
just might make things easier but they that they aren't necessary yeah I I don't I don't want to overthink it but but I
appreciate the the the discussion because um maybe I I I don't need them so I'm I'm coming around to to your way yeah um
p uh when did I release this game so the physical that you see here uh was released I don't know a couple years ago uh
if you go to td. cards um you can find out more about it but anyway um that was actually a really good discussion so
thank you for that because they are value objects because the predict cards are interchangeable I just need to it
doesn't that doesn't mean I can't have multiple of and maybe I I don't need to tell the difference I'll keep that in
back of my head uh in the meantime one thing I want to do is is I'd like to uh reformat my source that uh sure so let's
do a commit now we've reformatted um oh yes thank you for switching camera uh not sure how to approach this so so
there's certainly some cleanup I could do like all those um dboc ified classes could be con probably a lot of them could
be converted to records except I don't think that's worth it because I had actually just delete them because they might
not even be necessary um so the fact is is game is uh happening um one of the problems built into game right now or one
of the limitations is it's kind of assuming a two-player game uh it does have a map of player IDs to um an opponent for
a player and that doesn't exist that may have existed when um but it makes no sense with a three or four player game so
that concept has to has to go away uh so let's start making a a sort of punch list as it were this uh this task list is
pretty out of one and yes and I was just about to say so work uh we'll get rid of the front end module Al um no I don't
I don't I was going to say look for place to clean up but I'm not things I'm glad has yeah uh one thing I definitely
wanted so um uh remove the idea of an opponent uh games can have anywhere from one to six players so right now the game
you can actually play solo like you can play sort of against yourself uh and you can do things like you could time box
it you could play around with it um but certainly the the opponent idea is has um maybe get rid of the card8 because
maybe that's actually just getting in um it might have been easy to you it might have been easier for cross backend
frontend communication um but since I'm not holding any state on the front end anymore than then it easier um what else
do I need to get rid of uh so there's some stuff around uh architecture testable architecture that um yeah I was
thinking Arc unit I'm not right I'm not quite ready to pull in Arc unit just yet uh but certainly as part of that I did
just finished writing a rule for this that any uh any class that references random directly uh references clock certain
clock methods or references collections. Shuffle must be an adapter well um I honestly I'm like in the back of my head
is going what the heck did I mean by this what did I mean by location uh I could go back to my videos and and see what I
what I was thinking test oh right location was location on the board um because I was going to try start introducing the
idea of having uh the board be visible and so this test is perfect for that because it's basically saying like in the
game to get from here to here you discard a card so to get from location one to location two you have to discard a card
uh and that's exactly what what this test says so yay passed me for writing a good good test method name um so this is
starting to implement the rules of how you move around around the board start so one of the things I've been I've been
sort of struggling with is like there's there's stuff that's sort of implemented or half like so where do I go from here
I mean I could just tear it you know tear it completely down and and start over um but you know I've got loss aversion
uh and some cost fallacy so I want to actually take this stuff and uh and make it into the new thing um but I wonder if
if sort of figuring out what I need as as if I was trying to play the game um if that might be an interesting approach
certainly from a thought process point of view yes we love Legacy because it's our nature to to to like it uh all right
so need uh so structure for the board including uh so tile would have been a better name than location but when I wrote
this I didn't have the physical version so uh um but tile is certainly certainly the yes there's definitely uh solving
riddles or or puzzles that that uh that we love yeah a tile has rules for exit so there's basically um there's uh in
some cases there's just one way to exit so you discard a card to go from here to here discard a card to go from here to
here uh then to go from here you can either Skip and so you'd to you'd skip down to here uh to write code for feature um
but to do that you you take on code risk over moved hope you're not getting seasick go um so tiles have have rule uh a
tile has rules for exit uh sometimes multiple dungeon um and sometimes you need a magic spell to to open the door uh and
successfully so all why does it think precondition is spelled correctly but not post it in somech yes exits uh I mean
really it's one big state machine so uh I'm reading um uh I was reading a or actually skimming through a couple of
different books um that are about Concepts uh so there's one book by um called I'm blanking on the name of the uh oh no
it's called This is why I can um because it's it it's all about software Concepts um um but the that's not the name of
the book uh it's the subtitle of um so let's go here okay so this is the book by Daniel Jackson right the instance of
software why Concepts matter for great design I think it's a really good book it's it's it's a bit there's a bit of
depth to this book um then there's uh another book oops ah there it models now what's interesting about this and I know
this is totally huge tangent um and yes I'm looking at these as for for for the book club because we're thinking about
that what the next um these are books that or at least one of these books is is one that I'd really like to like to do
uh they're both actually about there's a lot of similar ideas what I am amazed about about is they don't reference each
other they're contemporary to each other but they don't reference it's fascinating it's like Daniel Jackson how could
you not reference conceptual models the first edition came out before your book and talks about a lot of the same ideas
um so I'm I'm just like how could how could you not reference that uh but anyway it's this idea about not just like
features but the concepts beneath it uh and so the essence of software talks about like um you know how you might rate a
you know rate a book you know one to five stars uh but that concept of rating well it applied to a bunch of things uh
and so it's more than just the concept but then how you implement it you might even be able to if you think about it
from a conceptual standpoint you might be able to implement it in a way that is more easily reusable um but so I was
thinking about that because in um one of the uh one of his blog posts he talks about apps or state machines and I'm like
yes absolutely no that this conceptual models is the second edition the first edition came out before Daniel Jackson's
book came out so that's why this came out in uh this one came out in I don't know very recently uh so the first edition
came out in 2012 uh this Edition came out just came out 2024 so yeah so it's it's it's fascinating but anyway um so one
of the things he was talking about all this is to say that like applications of State machines probably a bunch of
interlocking State machines and so um for for a while now I've basically just looked at lots of things as state machines
so when I was doing the timer that was a fairly simple State machine although it got more complex when we had pause and
resume and things like that um and so the board is basic this board right is it's basically a state machine right so how
do you get from here to here well there's only one thing that can happen there's only one transition but once you're
here then if you do skip then that transitions you to here um uh but if you're here then you have to play a right code
card so that transitions you to here so um what's nice about that is it's not the tiles that have rules for exit it's
really that there's a state machine that looks at all the incoming say here and I play doesn't matter which card let's
say I play a a right code card then it moves me to here if I'm here and I play a less code card well that's actually not
valid there is no transition that allows me to play a less code card but from here this rule is a bit more General so
from here I could play a l code card to get to here um so it's the transitions that are available so this one would say
any card applies to be able to to transition so basically discarding a card or playing a card um moves you here whereas
this one it would need to to say the command is is uh right code play uh which would move me to here um but there's also
I elect as a completely different kind of S oh stop um I was convinced I'm I'm on your side uh uh so so basically it's
one big state machine and so um I think I need to write I think I need to write that state machine I'm going to take a
break and then when I come back we're going to go into um plant uml and create a state machine for our board and I'll
have to remember what the syntax is uh but we're going to take a break first um and so enjoy enjoy the the the wonderful
coffee break video and I'll be n all right and we're back yes midnight coffee for those of you in in that time zone I
gotta say I I you're adult so you can do whatever you want but I do feel a little bad like um that you're that it's
really late for you all in in in UTC plus time zones um all right so let's go uh we'll create a we'll call it board
State machine I haven't noticed it taking up um but I haven't been paying attention CPU is that on a on an on an M m123
processor or or Intel why are you showing me this usage that's why M1 I wonder if there's maybe there's a regression of
um I have some announcements that I'll be making around some giveaways it ah here it is so intelligence uh in jet brains
started this content creators program um and so one of the things they're they're going to offer is is uh some some
giveaways um and so I'll I'll have to figure out how I want to give them away but things like uh oneyear licenses for um
for for an IDE so stay tuned for that all right uh so let's get back to here um okay so let's uml two thing not first
sure what this first uh I'm not going to deal with composite yet not what should ID do what should it do uh so that's
basically tile so that's what you to do so let's create all our tiles so we've got uh uh how know I changed some of the
language uh I yet uh I'm going to call this what so you start off with what um and to transition from what to how do I
indicate the transition ah it's after the colon so to go from what to how you discard card uh discard any card discard
any action card game uh uh I realize this didn't have to thing and to go to the next one it's going to be similar so uh
the next state is uh write code for test test so to go from how to for test not text old have it die hard um here one
exit is exit and you don't go to four test you risk so um let's add for feature this is so let's see so if we do it this
way um the state machine is associated player so we start them in a specific state which is basically when they join the
game they're tile and when we receive a command from them the only thing we can get from them at least that changes the
state is uh discarding a card there's another mini State machine or some other thing that we're tracking which is how
many cards did you discard so the definition of a turn in this game is you play or discard three from uh from here write
code for test to here write code for feature and taking on risk is actually not a turn is not something that eats up any
aspect of your turn um which is something I need to clarify in the instructions all right so once you're in for so this
one is a bit more complicated uh this is the test results and that will depend on um some other mechanisms to play a
predict card which requires you to have played a right code card so there's some prerequisites for this state uh and so
definitely there's um uh composite or sub substate going on here so let's see if we can work that out succeeds um but
that's not as as successful um but you actually can't directly get uh it's not a fork joint it's just a um I don't know
what to call out I'm going to call it predict for now so within this state um I think the whole state is basically what
tie on which is uh the predict fail is oops so I think there's you so to basically enter this state the next thing you
have to do that will move you God these Auto completes are really annoying um playright code card uh except that's not
what gets you to this state um actually what gets you to is oh we had to already play no this is correct actually we in
order to get from here to here you do have to play the right code card so wrong uh this is really the substate how so
let's see so how you know did it you play oh that's wrong discarding this Ah that's why I was confused so this doesn't
play right code card this is right so start out here you discard any card you end up here to get to the next step you
discard any card and you're state uh so let's comment that out for a second uh Sometimes using a drawing program would
make this easier uh because I know what I want to say I just don't know how to express it yet um so we go from here from
how you know you did it to here is discard any card when you're in this state you're actually in a substate so this is
the substate that's what's going on um so for test is actually the substate because we haven't gotten into the predict
yet uh from here to uh uh predict fail to compile yeah that's right so you discard a card discard any card you end up
here you discard any card you end up in this state um you're in wait for for right to code uh so one way you get so one
way to exit is this way the other way to uh is if you um add three cycle too I also wish this would format it
differently um okay so the next and we start out in um code uh and so wait for write code if you write predict I'd love
for you to format to use more top to bottom uh can I do top bottom wonder if I set the width if that no that's just
makes it enough yeah these are these these wait for write code cards are actually uh are actually different um so let's
call this one uh just call this one for now and this yeah right so if you are in the right code for test tile there are
two ways to compile because four feature is tile remember there being a top bottom left right let's take a look uh oh
the down thing uh so let's try that uh playright code card thank you I again it's like totally forgot um so what should
it do discard how do you know how you know did it discard now we're in write code for test there are two ways out one is
add three cycle risk now you're at right code for feature otherwise you play the right code card you're now in predict
test will fail to compile right so we are now here um and there are two ways to exit one is uh plus two risk and the
other expected to uh the next tile which uh the way you do that is uh the other way to exit which is from rate for right
code to and I'm going to have to rename these uh to uh for yeah I'll figure out the orientation after but um I realize
there is a difference between the the single Dash and the Double Dash that's where I was getting confused um right so
you can go from technically from write code for test to write code for feature by adding three cycle risk uh here we can
add two cycle risk to get there except I think the source is is basically the outer state so let's try that yeah that
makes more sense uh and so this one is the outer state yeah because you don't do any anything here um so discard discard
uh playright code card gets us here or we can add cycle risk once we're in here this one's a bit more complex so uh we
have to write code then it's wait for predict um two uh once we're in wait for predict um you play the right code card
now you got to play a predict card um and so okay so that's right so you come in uh we wait for the right code card you
play it now we're waiting for you to play a predict card you play the predict card prediction uh that's when our random
number generator says yes or and if you if prediction is successful then you go to the next step if is not successful
you end up back at game right so there's this sort of loop here that uh you wait to play predict card you play the
predict card uh you wait for the test results if the prediction fails you're back at you will now have to play another
predict so in that case you discard all of your Inplay okay go so the number of less code cards played uh less code
cards aren't required they don't change the state they just will affect um whether the prediction uh is successful or
not so that's more of um when we randomize the the prediction uh outcome that will depend on um the number of less code
cards so technically there is a I mean we could put it in um or we could just sort of ignore it uh there is when you've
played right code card so you're waiting for predict you could do a wait for predict and go back to wait for predict
card um since you end up up in the same state I don't I don't think the state machine the state machine doesn't care um
but it does mean that it it's explicit that that's allowed you can't play any other card uh you can discard cards at any
time you don't have to play yeah so basically whether it's successful whether your prediction is successful or not
depends on um both a random number generator and therefore then uh how many how many less code of predict test will fail
to compile now we're in write codes to test compiles it's going to be a very similar can I reuse substate cuz that's
what I'd like to do here it's pretty much the almost exactly substates I guess I'll just copy and paste oh that's
interesting so I guess DRL is short for downright like that's what it documents here but you can also letters um yeah
too bad there isn't a refactor uh all right so let's go delete this stuff uh so the the next state then um test
basically risk yeah I know that's what you said earlier I didn't I didn't realize that I'm used to using the D I didn't
realize that it was actually documenting the the full word here and not the shortcut letter um I don't know why You' use
the full word like uh so this is test compiles this is not test compiles this is predict test will fail compile so
that's what this one is going to there we is um this one is similar except you can't risk uh and then the next step is
uh for feature it's too bad that that these uh things aren't scoped to the state the substate that it's in that would
make this easier but I'll I'll I'll rename these later um all right I'm going to take this out because I'm just going to
let it uh Zoom naturally so let's see um yeah cool so you can add three risk here or you can add two risk here or you
can add one risk here and those all end up at right code for feature um each of these steps are similar uh no this one
is right um so the right code so test compile um is actually more like this one so yes you can exit by adding one cycle
risk uh we rate for right code and actually we exit immediately to predict test fail and then the rest of this goes away
right because this one is very much like so there's an exit where you play the right code card and then there's the
process um and so then actually the next state is very similar to uh and where you go next when you play is predict test
passes uh and there's no early exit from straightforward State diagram is getting bigger and bigger there you go now we
page um so play right code you're in here you're going through the typical predict you can only exit when prediction is
successful um now we're in right code for feature the way you exit here is you play right code card uh now you're in the
state of predict test passes state uh now we're we're sort of back to to this mode um this isn't wait for right code
this is wait for everywhere yeah need um so I think I made the same mistake pile you had already played the right okay
so that's predict and and then that goes away is that right so we enter predict compile I can make this bigger I'm not
sure that how much that will that will so we discard any action write code for test we wait for right code the way we
exit is we play right code we enter by waiting for a predict if we play less code we're still back at waiting for
predict uh we play the predict card and now we're waiting for test results so this is fine this is similar to the other
one uh this is similar to the other one wrong oh that's interesting it did a search it's actually the wrong one it's
actually uh not that okay uh do I need the composite States um probably not compiles right because there's only so so
let's start at this one so write code for test one uh we don't need the sub test so it's for test and so you basically
go to for feature by adding cycle risk um there we go so let's see so that how look uh what happened to test right so
now you got two options you can either go the long way uh or go the quick way the risky way yes much better all right so
let's fix up the other one the other one's going to look compiles uh and then this is test compiles right so we either
test uh test compiles goes directly there okay and then this feature uh this one is pretty much just predict exit and
then predict passes um that's the prediction process so it turns out I've observed people because of course the game
offers that option so people will try out the risky route and it will actually push them uh ahead pretty quickly for a
little while you and they have then learned by seeing the other people who took the safe route start to pass them um but
in the short run it uh oh X proof sorry I didn't see your question earlier uh so that has so there's the spring
repository and then there's the adapter um so unfortunately spring names their stuff repository but really I the
repository is the name of a domain driven design tactical pattern um so from my point of view the port um it also is
called repository which I I do agree is a little bit confusing but there are two one is the port definition uh the other
just happens to be a technical feeling um and fod for for great discussion and this is not for feature this is commit
code the disappointment when you get to the uh commit code and you've got risk and so you roll the dice and you
basically have to revert everything and yeah that's the the naming of that stuff became very clear um I think when I was
pairing with with Mike the other day on on this stuff uh so I may be rethinking my port name for the repository since I
can't change the other name so we write code for feature the only way to exit is you play the right code card um predict
test passes uh that's not predict test passes yes it is I just here so wait for predict play list code um play the
predict card prediction code um this has some internal States uh actually no this does not have any external to what by
doing um and you uh actually I think there is a substate risk uh SW ask how often do I see people in the real world
actually revert and start over instead of doubling down yeah should um I have been I have idle I have thought about uh
basically for um for this tile like I've had ideas for kind of a whole sub game um that's around refactoring and trying
to reduce risk and and uh and sort of spending more cards to try harder to get it to to get the the test prediction to
work that doesn't reduce risk that may even increase risk so there's some some sort of stuff there that that I've been
uh toying with as sort of an extension um and sort of this would would have like a whole uh sort of Sub hire more
players yeah um there is a there is a variation of instead of every player having their own Pawn that there's one Pawn
um and that's the the mob programming variation uh where um now you've got one Pawn that you're moving through uh and
then each player can basically push it a little bit further uh and there's a sub variation of that we can start trading
cards so there's some some interesting variations that people have come up with which has been a lot of fun um shouldn't
the substate machines end in an inner end point and then substate state yeah I don't test code four tests for uh so let'
s make this down see this is the problem with the with the auto layout is like you get you get this Ridiculousness and
I'm like why are you going from here all the way over to here why isn't and I'm trying to push this one down um but it
doesn't seem to be D and then there's this one that's going uh yeah haha very funny Aster um I don't think that would
matter certainly not not for this one uh wait for test results to I I push this to be matter I feel like it's no longer
paying attention to uh to what's going um yeah so this all happened because basically this is one circular State machine
and it and it's not recognizing that cuz like this is the entry point into the tile do you there we go now i' now I told
it no no I want it um there's some substates around this part where if you do have risk you go into a substate where
well it's not a substate it's just another state die hey uh D Soul SP um yes this is plant uml so I'm describing the
diagram State machine diagram using text instead of trying to draw stuff by hand so uh there is uh evaluate risk yeah
I'm going to be ending the stream soon and I I appreciate that that it's very late for you so thanks for hanging out uh
get some sleep um I'm going to do this last thing and then then I'm going to end it for for today uh so say uh D roll
goes to risk no risk is that what I want so we go to evaluate risk again request um so then it's the thing I call Choice
which is evaluate risk goes to somewhere risk yeah something has to point there what am I missing um request ID points
to the choice thing so request ID points to C I've got be so either we go um back to the first tile if you have no risk
um or uh we go uh if you have risk so let's see um right so if you have risk we evaluate the risk uh and the way we
evaluate the risk is you roll a die here I guess it's just um Your Role is less than or equal over um oh the Tilted
Square went been right uh yeah I probably do need to if I put it earlier yeah thank you all right so have risk now we
make the choice and the choice is If the roll is risk than risk I mean we're always going back to to the start but
different things happen as as an outcome uh if your role is greater than basically he's at another state I guess um but
it's basically that so uh if your roll is less than risk you res revert and start over otherwise if it's greater than
risk then points there's one other step in something but I think that's going to be enough for now so I that's it I
think that's the whole there it probably right code for feature play card think if I do that's interesting it didn't it
didn't right oh I guess I could just do weird it's like this Arrow right here which goes from here to here and I'm
saying right and it's not doing it I don't get it um how about right no no it's algorithm must be overriding it
somewhere else yeah it's it's the right code for test when it does add cycle three RIS three cycle risk uh how about I
delete that and make it either yeah I'll change the the the the numbered ones later on um I think I think it's good
right this is where I want to just drag um because I'd like this right code for test to go to predict now passes to also
be right this I'd like to be right uh right code so test compiles so add one cycle you still believe in inner end points
um well I'm going to the this will be available so you'll you know feel free to to give me give me some ideas on what
like yeah I don't I don't generate a ping um I just add the the PML file uh to the to the because if I add the Ping then
then it's then it's out of date as soon as I generate it it's out of the out of date uh you can always just look at it I
mean yes it does mean that if you look at it on uh so I forget if GitHub supports plant uml does support mermaid syntax
which is very close um I wonder if Mermaid has better layouts I'll have to try that yeah I don't I don't know if if
GitHub renders it honestly don't for for this project I don't care um because nobody's going to be looking at at this
there if they want to look at you can open up and plant uml I might I might try to convert it to to mermaid and see what
that looks like maybe I can I can get its algorithm to be tweaked a little bit nicer because um what I want is this one
like further to the right uh but now I'm shedding all that matters is is that it's it's correct um which I believe it is
it's annoying that this is now over here and cross is in the crossover so I'd like to minimize these worse so I could
remove all of the um sort of the the formatting let it do it it's on its own uh and then and then tweak it after which
is what I said I was going to do that uh all right that's good enough for now so um I don't like that the entry point is
here that's that's my biggest my biggest problem but uh I'm more than done for today all right so um thanks for hanging
out thanks for all the help uh appreciate uh all the questions and suggestions uh for those of you in in in Europe you
should be asleep by now um if not go to sleep and uh tomorrow uh I don't think I'll have a pairing stream so I think
I'll basically do another solo stream and pick it up from here and um yeah that's it so thank you for hanging out uh and
hope to see you on a
